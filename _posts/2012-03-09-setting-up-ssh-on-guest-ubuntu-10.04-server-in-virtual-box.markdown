---
published: true
layout: post
title: Поднятие ssh на гостевом Ubuntu 10.04 Server под Virtual Box
lang: ru

---

По-умолчанию у вновь созданной VM в качестве режима сети выставляется NAT. Этот режим в Virtual Box’e имеет несколько ограничений (раздел 6.3.3 справки), например — гостевая машина недоступна с хостовой по сети, между ними нет никакой связи. Чтобы как-то это обойти используется проброс портов (port forwarding). В этом случае порту гостевой машины ставится в соответствие порт машины-хоста.

Чтобы пробросить 22-й порт (ssh) с гостевой машины на 2222-й порт машины хоста надо на хосте выполнить команду:
  * `VBoxManage modifyvm "Ubuntu 10.04 server" --natpf1 "guestssh,tcp,,2222,,22"`

Здесь указывается Ubuntu 10.04 server — имя виртуальной машины на хосте, guestssh — имя создаваемого port forwarding’a, протокол и порты. Приложение VBoxManage лежит в папке Virtual Box’a.

Далее в виртуальной машине устанавливаем ssh-сервер:
  * `$sudo apt-get install ssh`

и заходим с гостевой машины (у меня - Windows 7, через PuTTY) на `localhost:2222`.

Все.
