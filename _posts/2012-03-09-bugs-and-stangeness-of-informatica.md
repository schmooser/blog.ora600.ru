---
published: true
layout: post
title: Баги и странности Informatica
lang: ru
category: informatica

---

За время работы с Informatica Power Center 8.1 обнаружены следующие баги:

1. Не работает выборка последнего элемента (use last) в lookup с override SQL с сортировкой по неким полям. Решение — использовать use first и сортировку в обратном порядке (`order by ... desc`). – Не совсем точное утверждение, напишу про это отдельный пост.
2. Если сравнивать тип данных money, пришедший с MS SQL Server с типом double, то цифры могут не сматчиться. Решение — в IPC явно проставлять формат для таких аттрибутов в numeric(19,4). 
3. Есть маппинг, реализующий добавление строки в лог-таблицу (Oracle). Размер экстента таблицы 1 мб. Замечено очень странное: при каждом выполнении маппинга (вставка одной строки), количество экстентов увеличивалось на 1. Естественно, в 1-мегабайтный экстент влезет несколько сотен строк, никак ни одна.  Первая мысль — виновато кеширование сиквенса (10000), оказалась ошибочной. Дело было в типе вставки — при смене с булк-режима на нормальный все стало нормально. 
4. В SQL Override лукапа Информатика <s>любит</s> требует, чтобы у атрибутов были явно заданы алиасы в виде `TAB.COLUMN_NAME AS PORT_NAME`. Вот это `AS PORT_NAME` для нее играет ключевую роль, иначе выдается ошибка Invalid lookup query override. Похоже, она переписывает SQL перед отправкой его в базу. Столкнулся с этой проблемой, нашел [здесь](http://myinformatica.blogspot.com/2008/03/invalid-lookup-override.html) решение этой проблемы.
5. Если в маппинге есть несколько лукапов на основе одной таблицы, но при этом Source Filter у них будет разный, а Enable Lookup Cache включен, то Информатика будет реюзать кеш для всех остальных лукапов, кроме первого. В итоге, данные будут неправильно лукапиться. Надо посмотреть насчет того, бага это или фича.
6. Если лукап находится внутри мапплета, то в Source Filter лукапа нельзя использовать параметры мапплета — они не подхватятся. А если писать в Source Override, то подхватятся.
