<!DOCTYPE html>
<html lang="ru">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Блог Павла Попова</title>
  <meta name="title" content="">
  <meta name="description" content="Павел Попов">

  <meta property="og:url" content="/page13/index.html">
  <meta property="og:title" content="">
  
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="Павел Попов">
  <link rel="icon" type="image/png" href="/public/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="Блог Павла Попова" href="/blog-feed.xml">
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic|PT+Sans:400,700,400italic|Roboto:100,300|Roboto+Slab:300,400&amp;subset=latin,cyrillic" rel="stylesheet">
  <link href="/public/css/main.css" rel="stylesheet">

  <!-- CSS -->
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Custom -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <link  href="http://fotorama.s3.amazonaws.com/4.6.0/fotorama.css" rel="stylesheet"> <!-- 3 KB -->
<script src="http://fotorama.s3.amazonaws.com/4.6.0/fotorama.js"></script> <!-- 16 KB -->
  <script src="/public/js/dug.js"></script>
  <script src="/public/js/application.js"></script>
</head>

<body>
<header class="row-1">
  <nav class="title-nav" role="navigation">
    <h1 class="title-nav-header"><a href="/">Павел Попов</a>
      <span class="title-nav-slash">/</span>
      <a href="/">Блог</a>
    </h1>
  </nav>
</header>

  <section class="entry-list row-1" role="main">
  
    <article class="entry">
      
  
  
  



  


  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/speed-of-direct-path-load/">Скорость direct path load</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <p>По скорости загрузки 8 млн строк из текстового файла в Оракл.</p>

<ul>
  <li>Из MS SQL через Integration Services — ~2000 строк/мин, не дождался.</li>
  <li>sqlldr — 45 минут (~180000 строк/мин).</li>
  <li>sqlldr direct path — 4:55 (~1.6 млн. строк/мин).</li>
</ul>

<p>Чтобы использовать direct path, надо в параметрах запуска sqlldr указать
опцию <code>direct=true</code>.</p>



    
      <a href="/speed-of-direct-path-load/" class="read-link">Читать</a>
    
  </div>

  

    </article>
  
    <article class="entry">
      
  
  
  



  


  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/setting-up-ssh-on-guest-ubuntu-10.04-server-in-virtual-box/">Поднятие ssh на гостевом Ubuntu 10.04 Server под Virtual Box</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <p>По-умолчанию у вновь созданной VM в качестве режима сети выставляется NAT. Этот режим в Virtual Box’e имеет несколько ограничений (раздел 6.3.3 справки), например — гостевая машина недоступна с хостовой по сети, между ними нет никакой связи. Чтобы как-то это обойти используется проброс портов (port forwarding). В этом случае порту гостевой машины ставится в соответствие порт машины-хоста.</p>

<p>Чтобы пробросить 22-й порт (ssh) с гостевой машины на 2222-й порт машины хоста надо на хосте выполнить команду:
  * <code>VBoxManage modifyvm "Ubuntu 10.04 server" --natpf1 "guestssh,tcp,,2222,,22"</code></p>

<p>Здесь указывается Ubuntu 10.04 server — имя виртуальной машины на хосте, guestssh — имя создаваемого port forwarding’a, протокол и порты. Приложение VBoxManage лежит в папке Virtual Box’a.</p>

<p>Далее в виртуальной машине устанавливаем ssh-сервер:
  * <code>$sudo apt-get install ssh</code></p>

<p>и заходим с гостевой машины (у меня - Windows 7, через PuTTY) на <code>localhost:2222</code>.</p>

<p>Все.</p>



    
      <a href="/setting-up-ssh-on-guest-ubuntu-10.04-server-in-virtual-box/" class="read-link">Читать</a>
    
  </div>

  

    </article>
  
    <article class="entry">
      
  
  
  



  


  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/session-blocking-and-rollback-to-savepoint/">Блокировка сессий и откат к savepoint</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <p><a href="http://plsqlchallenge.com/pls/apex/f?p=10000:651:585965286409691::NO:651:P651_COMP_EVENT_ID,P651_QUIZ_ID:10840,11619&amp;cs=1581E3AEBF2AA49892C68A59796A406B0">Интересный куиз</a> был вчера в PL/SQL Challenge, в нем обсуждалась взаимная блокировка сессий и откат к savepoint. </p>

<p>Я думал, что если одна сессия заблокировала строку и в это время другая сессия пытается эту строку изменить, то 2-я сессия будет заблокирована до тех пор, пока первая сессия на совершит commit или rollback. Но про rollback to savepoint я как-то не задумывался. Я полага, если идет rollback to savepoint и 1-я сессия отпускает строку, то 2-я сессия разблокируется и сделает свое дело, оказался неправ – блокированная сессия ждет  освобождения ресурса (обновляемой строки), а завершения блокирующей транзакции (commit/rollback). Но, если после rollback to savepoint в 1-й сессии запустить 3-ю сессию, изменяющую ту же строку, то она уже не будет заблокирована ни 1-й сессий ни 2-й сессией (которая блокирована 1-й) и выполнится без ожиданий. </p>

<p>Век живи, век учись. </p>



    
      <a href="/session-blocking-and-rollback-to-savepoint/" class="read-link">Читать</a>
    
  </div>

  

    </article>
  
    <article class="entry">
      
  
  
  



  


  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/running-oracle-instant-client-on-windows/">Установка и запуск Oracle Instant Client под Windows</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <ol>
  <li>Скачиваем нужную версию Oracle Instant Client. Нужна версия, совместимая с ПО, 
которое предполагается использовать. Например, для 32-х битного PL/SQL Developer 
нужна 32-х битная же версия Instant Client. Пакеты я брал Basic и SQL*Plus.</li>
  <li>Распаковываем в произвольную папку. Я распаковал оба пакета в одну и ту же папку 
<code>C:\Program Files (x86)\Oracle\instantclient_11_2</code></li>
  <li>Создаем две переменных среды:
    <ul>
      <li><code>ORACLE_HOME = C:\Program Files (x86)\Oracle\instantclient_11_2</code></li>
      <li><code>TNS_ADMIN = C:\Program Files (x86)\Oracle\instantclient_11_2\network\admin\</code></li>
    </ul>
  </li>
  <li>
    <p>Создаем файл tnsnames.ora в папке, указанной в параметре TNS_ADMIN, 
примерно следующего содержания:</p>

    <pre><code> ORCL =
 (DESCRIPTION =
  (ADDRESS = 
     (PROTOCOL = TCP)
     (HOST = localhost)
     (PORT = 1521) 
  )
  (CONNECT_DATA =
    (SERVER = DEDICATED)
    (SERVICE_NAME = orcl)
  )
 )
</code></pre>
  </li>
  <li>Запускаем <code>sqlplus</code> или PL/SQL Developer. Работаем.</li>
</ol>



    
      <a href="/running-oracle-instant-client-on-windows/" class="read-link">Читать</a>
    
  </div>

  

    </article>
  
    <article class="entry">
      
  
  
  



  


  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/removing-ads-from-gmail/">Убираем из Гмэйла рекламу</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <p>Никто не любит рекламу. Все пользуются AdBlock’ом. Я тоже. Но в Гмэйле после
порезанной рекламы справа, при чтении почты, остается довольно широкая колонка
пустого места.</p>

<p>Если у вас есть экстеншн, который правит css-ки сайтов (например Stylebot для
Хрома), то пишем для Гмэйла такой стиль:</p>

<pre><code>td.Bu:nth-child(3) {display: none;}
td.Bu:nth-child(2) {display: none;}
div.if {margin-right: 15px;}
div.ao8 {padding-right: 0;}
</code></pre>

<p>и вуаля, мерзкая полоса исчезает.</p>

<p>Работает во всех трех режимах — No Split, Horizontal Split, Vertical Split.</p>



    
      <a href="/removing-ads-from-gmail/" class="read-link">Читать</a>
    
  </div>

  

    </article>
  
    <article class="entry">
      
  
  
  



  


  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/no_data_found-exception/">NO_DATA_FOUND exception</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <p>Oracle генерирует исключение <code>NO_DATA_FOUND</code> в нескольких ситуациях:</p>

<ul>
  <li>при <code>SELECT INTO</code> если нет строк</li>
  <li>при чтении последней строки файла с использованием UTL_FILE.GET_LINE</li>
  <li>при обращении к несуществующему элементу массива</li>
</ul>

<p><a href="http://www.plsqlchallenge.com/pls/apex/f?p=10000:PG_PQ_DRILLDOWN:4164756902153718::NO:651:P651_COMP_EVENT_ID,P651_QUIZ_ID:2429,3567&amp;cs=1E556E42F7193ED0DBC29F3DB66AADDB2">ссылка на quiz</a></p>



    
      <a href="/no_data_found-exception/" class="read-link">Читать</a>
    
  </div>

  

    </article>
  
    <article class="entry">
      
  
  
  



  


  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/clustering-factor/">Clustering factor</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <p>The clustering factor is the number of times Oracle, when scanning the whole index in order, would have to swap to a different Table block to look up the table record for each index entry. If it is close to the number of blocks in the table, then the clustering factor is low and the order of records in the table matches the order of entries in the index.</p>

<p>This would make index range scans that need to visit the table reasonably efficient. If the clustering factor is close to the number of records in the table then it means there is no correlation between index order and table row order and such index ranges scans that have to visit the table would be inefficient.</p>

<p><a href="http://mwidlake.wordpress.com/2011/07/26/iot-2-first-examples-and-proofs/">Источник</a></p>



    
      <a href="/clustering-factor/" class="read-link">Читать</a>
    
  </div>

  

    </article>
  
  <a href="/archive/" class="archive-link">→</a>
</section>



  <!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter21201856 = new Ya.Metrika({id:21201856,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/21201856" style="position:absolute; left:-9999px;" alt="" /></div>
</noscript>
<!-- /Yandex.Metrika counter -->

</body>
</html>
