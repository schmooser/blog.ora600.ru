<!DOCTYPE html>
<html lang="ru">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Блог Павла Попова</title>
  <meta name="title" content="Параллельный запуск потока в Informatica PowerCenter">
  <meta name="description" content="Павел Попов">

  <meta property="og:url" content="/running-workflow-in-parallel-in-informatica-powercenter/">
  <meta property="og:title" content="Параллельный запуск потока в Informatica PowerCenter">
  
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="Павел Попов">
  <link rel="icon" type="image/png" href="/public/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="Блог Павла Попова" href="/blog-feed.xml">
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic|PT+Sans:400,700,400italic|Roboto:100,300|Roboto+Slab:300,400&amp;subset=latin,cyrillic" rel="stylesheet">
  <link href="/public/css/main.css" rel="stylesheet">

  <!-- CSS -->
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Custom -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <link href="http://fotorama.s3.amazonaws.com/4.4.9/fotorama.css" rel="stylesheet">
  <script src="http://fotorama.s3.amazonaws.com/4.4.9/fotorama.js"></script>
  <script src="/public/js/dug.js"></script>
  <script src="/public/js/application.js"></script>
</head>

<body>
<header class="row-1">
  <nav class="title-nav" role="navigation">
    <h1 class="title-nav-header"><a href="/">Павел Попов</a>
      <span class="title-nav-slash">/</span>
      <a href="/">Блог</a>
    </h1>
  </nav>
</header>

  <section class="single-entry row-1" role="main">
  
  
  
  




<article class="entry">
  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/running-workflow-in-parallel-in-informatica-powercenter/">Параллельный запуск потока в Informatica PowerCenter</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <p>В Informatica PowerCenter есть возможность запускать в параллельном режиме один поток (workflow) в разных инстансах. Данный метод запуска очень выгодно использовать для загрузки данных, которые хорошо партиционируются. Например, загрузку данных за месяц можно запустить параллельно в 4 потока по неделе или сделать подневную загрузку в N потоков.</p>

<p>Количество одновременных потоков надо выбирать исходя из производительности платформы. При увеличении числа потоков сначала идет практически линейный рост производительности, затем все начинает упираться в узкое место платформы (IO, CPU, RAM, Network) и дальнейшее увеличение количества параллельных потоков только замедляет скорость работы системы.</p>

<p>Чтобы поток мог работать в параллельном режиме, надо в настройках потока включить опцию “Configure Concurrent Execution”. В настройках Concurrent Execution лучше использовать опцию “Allow concurrent run only with unique instance name” иначе потом не разберешься какой именно параллельный запуск за какую часть работы отвечает. Нужно указать имя инстанса и параметрический файл. Обычно эти значения совпадают с таковыми у потока.</p>

<p>Запустить поток в параллель возможно только из командной строки через <code>pmcmd</code>. Скорее всего вам понадобится уникальный параметрический файл для каждого инстанса (например, разные периоды загрузки). В этом случае, в вашем диспетчере загрузок или управляющем механизме, который генерирует файл параметров, нужно предусмотреть процедуру сохранения файла параметров с уникальным именем.</p>

<p>Я это делал просто – диспетчер создает параметрический файл <code>wf_WFNAME.param</code> и командный файл для запуска потока. В командном файле сначала файл <code>wf_WFNAME.param</code> копируется в <code>wf_WFNAME_xxxx.param</code>, где <code>xxxx</code> – уникальный номер запуска потока, а затем вызывается <code>pmcmd</code>:</p>

<pre><code>param_dir=/informatica/pc/server/infa_shared/DEV/Param/
bin_dir=/informatica/pc/server/bin 
cp $param_dir/wf_CALC.param $param_dir/wf_CALC_1712.param

$bin_dir/pmcmd startworkflow -service SERVICE_NAME
                             -domain DOMAIN_NAME
                             -user username
                             -password pwd
                             -folder FOLDER_NAME
                             -paramfile $param_dir/wf_WFNAME_1712.param
                             -runinsname wf_WFNAME_1712
                             wf_WFNAME
</code></pre>

<h3 id="to-do">To Do</h3>

<ul>
  <li>добавить скриншоты настроек параллельного запуска</li>
  <li>добавить анализ скорости выполнения задачи от количества параллельных инстансов</li>
  <li>описать работу диспетчера задач</li>
</ul>


    
  </div>

  
  <footer class="entry-footer">
    <time class="entry-timestamp">06 Nov 2013</time>
  </footer>
  
</article>

</section>



  <!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter21201856 = new Ya.Metrika({id:21201856,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/21201856" style="position:absolute; left:-9999px;" alt="" /></div>
</noscript>
<!-- /Yandex.Metrika counter -->

</body>
</html>
