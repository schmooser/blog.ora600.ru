<!DOCTYPE html>
<html lang="ru">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pavel Popov's Blog</title>
  <meta name="title" content="Install Oracle 11g Express (XE) on CentOS">
  <meta name="description" content="Pavel Popov">

  <meta property="og:url" content="/install-oracle-xe-on-centos-6/">
  <meta property="og:title" content="Install Oracle 11g Express (XE) on CentOS">
  
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="Pavel Popov">
  <link rel="icon" type="image/png" href="/en/public/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="Pavel Popov's Blog" href="/blog-feed.xml">
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic|PT+Sans:400,700,400italic|Roboto:100,300|Roboto+Slab:300,400&amp;subset=latin,cyrillic" rel="stylesheet">
  <link href="/en/public/css/main.css" rel="stylesheet">

  <!-- CSS -->
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/en/public/apple-touch-icon-precomposed.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Custom -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <link  href="http://fotorama.s3.amazonaws.com/4.6.0/fotorama.css" rel="stylesheet"> <!-- 3 KB -->
<script src="http://fotorama.s3.amazonaws.com/4.6.0/fotorama.js"></script> <!-- 16 KB -->
  <script src="/en/public/js/dug.js"></script>
  <script src="/en/public/js/application.js"></script>
</head>

<body>
<header class="row-1">
  <nav class="title-nav" role="navigation">
    <h1 class="title-nav-header"><a href="/">Pavel Popov</a>
      <span class="title-nav-slash">/</span>
      <a href="/en/">Blog</a>
    </h1>
  </nav>
</header>

  <section class="single-entry row-1" role="main">
  <article class="entry">
    
  
  
  




  <header class="entry-header">
    <h1 class="entry-title">
      <a href="/en/install-oracle-xe-on-centos-6/">Install Oracle 11g Express (XE) on CentOS</a>
    </h1>
  </header>

  <div class="entry-body content-area">
    

    <blockquote>
  <p>This is full copy of the <a href="http://www.davidghedini.com/pg/entry/install_oracle_11g_xe_on">post</a> by David Ghedini for backup purposes.</p>

  <p>Refer to <a href="/installing-oracle-xe-11gr2-on-centos-6/">my post</a> about swap file on server and localhost’s name.</p>
</blockquote>

<p>This post will cover basic installation and configuration of Oracle 11g Express Edition (XE) on CentOS.</p>

<p>We will also take a quick look at configuring Application Express (APEX) for 11g XE.</p>

<p>Basic installation is straight forward.</p>

<p>If you just want to get up and running, you can just do steps 1 to 4 below (and 10 and 11 for Apex). The remaining steps (5 to 9) cover basic backup, recovery, and performance configuration.</p>

<p>The full system requirements are <a href="http://download.oracle.com/docs/cd/E17781_01/install.112/e18802/toc.htm">here</a>.</p>

<p>Your CentOS box should have swap equal to 2xRAM. <em>(look at <a href="/installing-oracle-xe-11gr2-on-centos-6/">my post</a>)</em></p>

<p>On every CentOS installation I have done for XE, I just needed to update/install the packages for libaio, bc, and flex.</p>

<pre><code>[root@ms3 ~]#  yum install libaio bc flex
</code></pre>

<h2 id="step-1-download-and-install-oracle-11g-xe-rpm">Step 1: Download and Install Oracle 11g XE rpm</h2>

<p>You can download the Oracle XE rpm, <code>oracle-xe-11.2.0-1.0.x86_64.rpm.zip</code>, from the OTN [here][download-xe].</p>

<p>Unzip <code>oracle-xe-11.2.0-1.0.x86_64.rpm.zip</code>:</p>

<pre><code>[root@ms3 ~]# unzip -q oracle-xe-11.2.0-1.0.x86_64.rpm.zip
</code></pre>

<p>This will create the directory <code>Disk1</code>. Change to the <code>Disk1</code> directory:</p>

<pre><code>[root@ms3 ~]# cd Disk1  
[root@ms3 Disk1]# ls  
oracle-xe-11.2.0-1.0.x86_64.rpm  response  upgrade  
</code></pre>

<p>Install the rpm using <code>rpm -ivh oracle-xe-11.2.0-1.0.x86_64.rpm</code></p>

<pre><code>[root@ms3 Disk1]# rpm -ivh oracle-xe-11.2.0-1.0.x86_64.rpm  
Preparing...                ###################### [100%]  
   1:oracle-xe              ###################### [100%]  
Executing post-install steps...  
You must run '/etc/init.d/oracle-xe configure' as the root user to configure the database.

[root@ms3 Disk1]#  
</code></pre>

<h2 id="step-2-configure-11g-xe-database-and-options">Step 2: Configure 11g XE Database and Options</h2>

<p>When installation completes, run <code>/etc/init.d/oracle-xe configure</code> to configure and start the database.</p>

<p>Unless you wish to change the ports, except the defaults and set SYS/SYSTEM password. </p>

<pre><code>[root@ms3 Disk1]# /etc/init.d/oracle-xe configure

Oracle Database 11g Express Edition Configuration
-------------------------------------------------
This will configure on-boot properties of Oracle Database 11g Express
Edition.  The following questions will determine whether the database should
be starting upon system boot, the ports it will use, and the passwords that
will be used for database accounts.  Press &lt;enter&gt; to accept the defaults.
Ctrl-C will abort.

Specify the HTTP port that will be used for Oracle Application Express [8080]:

Specify a port that will be used for the database listener [1521]:

Specify a password to be used for database accounts.  Note that the same
password will be used for SYS and SYSTEM.  Oracle recommends the use of
different passwords for each database account.  This can be done after
initial configuration:
Confirm the password:

Do you want Oracle Database 11g Express Edition to be started on boot (y/n) [y]:y

Starting Oracle Net Listener...Done
Configuring database...Done
Starting Oracle Database 11g Express Edition instance...Done
Installation completed successfully.
</code></pre>

<p>The installation created the directory <code>/u01</code> under which Oracle XE is installed.</p>

<h2 id="step-3-set-the-environment">Step 3: Set the Environment</h2>

<p>To set the required Oracle environment variables, use the <code>oracle_env.sh</code> script included under <code>/u01/app/oracle/product/11.2.0/xe/bin</code>:</p>

<pre><code>[root@ms3 Disk1]# cd /u01/app/oracle/product/11.2.0/xe/bin  
</code></pre>

<p>To set the environment for your current session run:</p>

<pre><code>[root@ms3 bin]# . ./oracle_env.sh  
</code></pre>

<p>To set the environment permanently for users, add the following to the <code>.bashrc</code> or <code>.bash_profile</code> of the users you want to access the environment:</p>

<pre><code>. /u01/app/oracle/product/11.2.0/xe/bin/oracle_env.sh  
</code></pre>

<p>You should now be able to access SQL*Plus:</p>

<pre><code>[root@ms3 bin]# sqlplus /nolog  
  
SQL*Plus: Release 11.2.0.2.0 Production on Wed Sep 21 08:17:26 2011  
  
Copyright (c) 1982, 2011, Oracle.  All rights reserved.  
  
SQL&gt; connect sys/&lt;password&gt; as sysdba  
Connected.  
SQL&gt;  
</code></pre>

<h2 id="step-4-allow-remote-access-to-oracle-11g-xe-gui">Step 4: Allow Remote Access to Oracle 11g XE GUI</h2>

<p>To allow remote access to Oracle 11g XE GUI (as well as Application Express GUI) issue the following from SQL*Plus:</p>

<pre><code>SQL&gt; EXEC DBMS_XDB.SETLISTENERLOCALACCESS(FALSE);  
  
PL/SQL procedure successfully completed.  
</code></pre>

<p>You should now be able to access the Oracle 11g XE Home Page GUI at:</p>

<pre><code>http://localhost:8080/apex/f?p=4950:1 -- note the port you've set during installation
</code></pre>

<p>Replace <code>localhost</code> above with your IP or domain as required.</p>

<p>Log in as <code>SYSTEM</code> using the password you selected in Step 2 above.</p>

<h2 id="step-5-move-the-flash-recovery-area-fast-recovery-area">Step 5: Move the Flash Recovery Area (Fast Recovery Area)</h2>

<p>To protect against disk failure, you should move the Flash Recovery Area to a separate disk.</p>

<p>This is actually now called the Fast Recovery Area, but the existing documentation still refers to it as the Flash Recovery Area</p>

<p>If a separate disk is not in your budget you should, at the very least, move the Flash Recovery Area to a partition other than the Oracle installation directory.</p>

<p>By default, the Fast Recovery Area will be located under <code>/u01/app/oracle/fast_recovery_area</code>:</p>

<pre><code>SQL&gt; show parameter DB_RECOVERY_FILE_DEST;  
  
NAME                                 TYPE        VALUE  
------------------------------------ ----------- ------------------------------  
db_recovery_file_dest                string      /u01/app/oracle/fast_recovery_area  
db_recovery_file_dest_size           big integer 10G  
SQL&gt;  
</code></pre>

<p>So, to move it elsewhere, first create the new directory</p>

<p>[root@ms3 ~]# mkdir /opt/fra  </p>

<p>Change the owner to oracle and the group to dba </p>

<pre><code>[root@ms3 ~]# chown oracle:dba /opt/fra  
</code></pre>

<p>Now, change the <code>DB_RECOVERY_FILE_DEST</code> to the location you selected above.</p>

<pre><code>SQL&gt; ALTER SYSTEM SET DB_RECOVERY_FILE_DEST = '/opt/fra';  
  
System altered.  
  
SQL&gt;  
</code></pre>

<p>To move the files use the <code>movelog.sql</code> script:</p>

<pre><code>SQL&gt; @?/sqlplus/admin/movelogs  
SQL&gt; SET FEEDBACK 1  
SQL&gt; SET NUMWIDTH 10  
SQL&gt; SET LINESIZE 80  
SQL&gt; SET TRIMSPOOL ON  
SQL&gt; SET TAB OFF  
SQL&gt; SET PAGESIZE 100  
SQL&gt; declare  
  2     cursor rlc is  
  3        select group# grp, thread# thr, bytes/1024 bytes_k  
  4          from v$log  
  5        order by 1;  
  6     stmt     varchar2(2048);  
  7     swtstmt  varchar2(1024) := 'alter system switch logfile';  
  8     ckpstmt  varchar2(1024) := 'alter system checkpoint global';  
  9  begin  
 10     for rlcRec in rlc loop  
 11    stmt := 'alter database add logfile thread ' ||  
 12                 rlcRec.thr || ' size ' ||  
 13                 rlcRec.bytes_k || 'K';  
 14        execute immediate stmt;  
 15        begin  
 16           stmt := 'alter database drop logfile group ' || rlcRec.grp;  
 17           execute immediate stmt;  
 18        exception  
 19           when others then  
 20              execute immediate swtstmt;  
 21              execute immediate ckpstmt;  
 22              execute immediate stmt;  
 23        end;  
 24        execute immediate swtstmt;  
 25     end loop;  
 26  end;  
 27  /  
  
PL/SQL procedure successfully completed.  
  
SQL&gt;  
</code></pre>

<p>Now, set an appropriate size for the Fast Recovery Area. Use <code>df -h</code> to insure that there is ample space.</p>

<pre><code>SQL&gt; ALTER SYSTEM SET DB_RECOVERY_FILE_DEST_SIZE = 20G;  
  
System altered.  
</code></pre>

<p>Verify the new location and size. </p>

<pre><code>SQL&gt; show parameter DB_RECOVERY_FILE_DEST;  
  
NAME                                 TYPE        VALUE  
------------------------------------ ----------- ------------------------------  
db_recovery_file_dest                string      /opt/fra  
db_recovery_file_dest_size           big integer 20G  
SQL&gt;  
</code></pre>

<h2 id="step-6-add-redo-log-members-to-groups">Step 6: Add Redo Log Members to Groups</h2>

<p>You should have at least two Redo Log Groups and each group should have at least two members.</p>

<p>Additionally, the members should be spread across disks (or at least directories)</p>

<p>For whatever reason, only one member is created per group on install.</p>

<p>You can view the redo log files using </p>

<pre><code>SQL&gt; SELECT * FROM V$LOGFILE;
</code></pre>

<p>Since the default location for the two members is the Flash Recovery Area, the two existing members have been moved to our new FRA.</p>

<p>You should now add an additional member for each group under <code>/u01/app/oracle/oradata/XE</code></p>

<pre><code>SQL&gt; ALTER DATABASE ADD LOGFILE MEMBER '/u01/app/oracle/oradata/XE/log1b.LOG' TO GROUP 1;  
  
Database altered.  
  
SQL&gt; ALTER DATABASE ADD LOGFILE MEMBER '/u01/app/oracle/oradata/XE/log2b.LOG' TO GROUP 2;  
  
Database altered.  
  
SQL&gt;  
</code></pre>

<h2 id="step-7-set-sessions-and-processes-parameters">Step 7: Set Sessions and Processes Parameters</h2>

<p>The default values for parameters and sessions is quite low on the default installation.</p>

<pre><code>SQL&gt; show parameters sessions;  
  
NAME                                 TYPE        VALUE  
------------------------------------ ----------- ------------------------------  
java_max_sessionspace_size           integer     0  
java_soft_sessionspace_limit         integer     0  
license_max_sessions                 integer     0  
license_sessions_warning             integer     0  
sessions                             integer     172  
shared_server_sessions               integer  
  
SQL&gt; show parameters processes;  
  
NAME                                 TYPE        VALUE  
------------------------------------ ----------- ------------------------------  
aq_tm_processes                      integer     0  
db_writer_processes                  integer     1  
gcs_server_processes                 integer     0  
global_txn_processes                 integer     1  
job_queue_processes                  integer     4  
log_archive_max_processes            integer     4  
processes                            integer     100  
</code></pre>

<p>You can increase these parameters.</p>

<p>After each change, you will need to restart the database.</p>

<p>Increase sessions and then bounce database.</p>

<pre><code>SQL&gt; alter system set sessions=250 scope=spfile;  
  
System altered.  
  
SQL&gt; shutdown immediate  
Database closed.  
Database dismounted.  
ORACLE instance shut down.  
SQL&gt; startup  
ORACLE instance started.  
  
Total System Global Area 1068937216 bytes  
Fixed Size                  2233344 bytes  
Variable Size             780143616 bytes  
Database Buffers          281018368 bytes  
Redo Buffers                5541888 bytes  
Database mounted.  
Database opened.  
</code></pre>

<p>Verify change to sessions parameter:</p>

<pre><code>SQL&gt; show parameters sessions;  
  
NAME                                 TYPE        VALUE  
------------------------------------ ----------- ------------------------------  
java_max_sessionspace_size           integer     0  
java_soft_sessionspace_limit         integer     0  
license_max_sessions                 integer     0  
license_sessions_warning             integer     0  
sessions                             integer     252  
shared_server_sessions               integer  
</code></pre>

<p>Increase processes and restart database</p>

<pre><code>SQL&gt; alter system set processes=200 scope=spfile;  
  
System altered.  
  
SQL&gt; shutdown immediate;
  
Database dismounted.  
ORACLE instance shut down.  
SQL&gt; startup  
ORACLE instance started.  
  
Total System Global Area 1068937216 bytes  
Fixed Size                  2233344 bytes  
Variable Size             763366400 bytes  
Database Buffers          297795584 bytes  
Redo Buffers                5541888 bytes  
Database mounted.  
Database opened.  
</code></pre>

<p>Verify change to processes parameter:</p>

<pre><code>SQL&gt;  show parameters processes;  
  
NAME                                 TYPE        VALUE  
------------------------------------ ----------- ------------------------------  
aq_tm_processes                      integer     0  
db_writer_processes                  integer     1  
gcs_server_processes                 integer     0  
global_txn_processes                 integer     1  
job_queue_processes                  integer     4  
log_archive_max_processes            integer     4  
processes                            integer     200  
SQL&gt;  
</code></pre>

<h2 id="step-8-enable-archivelog-mode">Step 8: Enable Archivelog Mode</h2>

<p>To enable online or “hot” backups, Archivelog Mode must be enabled.</p>

<p>Additionally, if you do not enable Archivelog Mode and take only offline or “cold” backups, should you need to restore the database you will only be able to restore to the last backup</p>

<p>To enable Archivelog Mode, shutdown the database and then startup mount:</p>

<pre><code>SQL&gt; shutdown immediate  
Database closed.  
Database dismounted.  
ORACLE instance shut down.  
SQL&gt; startup mount  
ORACLE instance started.  
  
Total System Global Area 1068937216 bytes  
Fixed Size                  2233344 bytes  
Variable Size             763366400 bytes  
Database Buffers          297795584 bytes  
Redo Buffers                5541888 bytes  
Database mounted.  
</code></pre>

<p>Enable Archivelog Mode</p>

<pre><code>SQL&gt; alter database archivelog;  
  
Database altered.  
</code></pre>

<p>Open the database and verify that Archivelog Mode is enabled</p>

<pre><code>SQL&gt; alter database open;  
  
Database altered.  
  
SQL&gt; SELECT LOG_MODE FROM SYS.V$DATABASE;  
  
LOG_MODE  
------------  
ARCHIVELOG  
  
SQL&gt;  
</code></pre>

<h2 id="step-9-create-online-backup-script">Step 9: Create Online Backup Script</h2>

<p>To create automated backups, you can modify the <code>backup.sh</code> included under <code>/u01/app/oracle/product/11.2.0/xe/config/scripts</code></p>

<p>Create a directory for your backup script</p>

<pre><code>[root@ms3 ~]# mkdir /opt/ora_backup  
</code></pre>

<p>Change the owner to oracle and the group to dba </p>

<pre><code>[root@ms3 ~]# chown oracle:dba /opt/ora_backup  
</code></pre>

<p>Copy the <code>backup.sh</code> script from <code>/u01/app/oracle/product/11.2.0/xe/config/scripts</code> to the directory you created above.</p>

<pre><code>[root@ms3 ~]# cp  /u01/app/oracle/product/11.2.0/xe/config/scripts/backup.sh /opt/ora_backup/backup.sh  
</code></pre>

<p>Open the <code>backup.sh</code> script in a text editor or vi. The last section will look like this:</p>

<pre><code>else  
   echo Backup of the database succeeded.  
   echo Log file is at $rman_backup_current.  
fi  
 
#Wait for user to press any key  
echo -n "Press ENTER key to exit"  
read userinp   
</code></pre>

<p>Change it to: </p>

<pre><code>else  
   echo Backup of the database succeeded.  
   echo Log file is at $rman_backup_current.  
   mail -s 'Oracle Backup Completed' 'david@davidghedini.com' &lt; /u01/app/oracle/oxe_backup_current.log  
fi  
 
#Wait for user to press any key  
#echo -n "Press ENTER key to exit"  
#read userinp   
</code></pre>

<p>The line we added above, <code>mail -s 'Oracle Backup Completed' 'david@davidghedini.com' &lt; /u01/app/oracle/oxe_backup_current.log</code>, will send us an email notification that the backup has completed as well as cat the backup log to the body of the email.</p>

<p>Note that we have also commented out the last two lines of the script (the prompt). </p>

<p>Create a cron job to run the script as user oracle.</p>

<p>You should run it at least once a day. With Archivelog Mode enabled, it is important that backups be taken regularly to prevent the Flash Recovery Area from filling. </p>

<h2 id="step-10-oracle-11g-xe-and-application-express-apex">Step 10: Oracle 11g XE and Application Express (APEX)</h2>

<p>Oracle 11g Express Edition comes with Application Express 4.0.2 already installed. </p>

<p>If you elect to upgrade to the latest version (4.1 as of this writing), you can do so but will loose access to the XE GUI. Not a huge loss, but something to keep in mind.</p>

<p>Although Apex is already installed, you will need to set the Internal Admin password.</p>

<p>To do so, run the apxchpwd.sql located under <code>/u01/app/oracle/product/11.2.0/xe/apex</code>:</p>

<p>Note: pick something simple like <code>Password123!</code> as you will be prompted to change it on first log in anyways.</p>

<pre><code>SQL&gt; @/u01/app/oracle/product/11.2.0/xe/apex/apxchpwd.sql  
Enter a value below for the password for the Application Express ADMIN user.  
  
  
Enter a password for the ADMIN user              []  
  
Session altered.  
  
...changing password for ADMIN  
  
PL/SQL procedure successfully completed.  
  
  
Commit complete.  
  
SQL&gt;  
</code></pre>

<p>You can access the Application Express GUI at:</p>

<pre><code>http://localhost:8080/apex/f?p=4550:1
</code></pre>

<p>Replace localhost above with your IP or domain as required.</p>

<pre><code>Workspace: Internal
User Name: admin
Password: (whatever you selected above).
</code></pre>

<p>Alternatively, you can access via <code>http://localhost:8080/apex/f?p=4550:10</code> or <code>http://localhost:8080/apex/apex_admin</code></p>

<p>Again, replace localhost above with your IP or domain as required.</p>

<h2 id="step-11-oracle-11g-xe-configure-epg-or-apex-listener">Step 11: Oracle 11g XE: Configure EPG or Apex Listener</h2>

<p>Unless you have a license for Oracle HTTP Server (OHS), your options are the embedded PLSQL Gateway (EPG) or Apex Listener. </p>

<p>The Application Express that comes installed with Oracle 11g XE is configured using the EPG.</p>

<p>While the EPG is simpler than Apex Listener, it can be painfully slow as of Apex 3.2. </p>

<p>Apex Listener, while quite fast, adds an extra layer of complexity. </p>

<p>You will need to install an application server to run Apex Listener.</p>

<p>I have run Apex Listener on both Tomcat (unsupported) as well as Oracle GlassFish 3.x (supported) and was not impressed with either.</p>

<p>A lot of people who know far more than I do about APEX (read: 99.9999% of the population) like the Apex Listener.</p>

<p>Apex Listener and it’s installation guide can be found <a href="http://www.oracle.com/technetwork/developer-tools/apex-listener/overview/index.html">here</a>.</p>

<p>The Apex Listener installation guide is well done and simple to follow.</p>

<p>If you need to install Oracle GlassFish or GlassFish CE (basic installation is the same), you can use my GlassFish 3.1 instructions <a href="http://www.davidghedini.com/pg/entry/install_glassfish_3_1_on">here</a>.</p>

<p>If you want to be an outlaw and use Tomcat, you can use my Tomcat 6 installation guide <a href="http://www.davidghedini.com/pg/entry/install_tomcat_6_on_centos">here</a>, or my Tomcat 7 installation guide <a href="http://www.davidghedini.com/pg/entry/install_tomcat_7_on_centos">here</a>.</p>



    
  </div>

  
  <footer class="entry-footer">
    <time class="entry-timestamp">24 May 2013</time>
  </footer>
  

  </article>
</section>



  <!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter21201856 = new Ya.Metrika({id:21201856,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/21201856" style="position:absolute; left:-9999px;" alt="" /></div>
</noscript>
<!-- /Yandex.Metrika counter -->

</body>
</html>
