<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ora600 &mdash; Some random thoughts &middot; Enable authentication in mongodb  </title>
  <link rel="stylesheet" href="http://blog.ora600.ru/css/main.css" />
</head>
<body>

<header class="highlight">
  <p>
  Blog by <strong>schmooser</strong>. 

  
  
    Follow me on <a href="http://twitter.com/schmooser">Twitter</a>.
  
  </p>
</header>

<nav>
  <a href="http://blog.ora600.ru/">
    &larr; Go back to post index
  </a>
</nav>
<article>
  <h1>Enable authentication in mongodb</h1>
  <span class="details">
    Posted on <a href="http://blog.ora600.ru/post/enable-authentication-in-mongodb/">4 June 2015</a>
  </span>
  <p>If you intended to use your mongodb server from outer world you need to enable
authentication. I think that authentication scheme in mongo is far from good and
always struggling with set up. That&rsquo;s why I keep notes on this topic here.</p>

<ol>
<li><p>Start <code>mongod</code> on the db without users using <code>--noauth</code> option and login
there without password</p></li>

<li><p>Create <code>admin</code> user with <code>userAdminAnyDatabase</code> role:</p>

<pre><code>&gt; use admin
&gt; db.createUser({user: &quot;admin&quot;, pwd: &quot;somestrongpassword&quot;,
    roles: [{role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot;}]})
&gt; exit
</code></pre></li>

<li><p>Login with created admin user and add other users:</p>

<pre><code>$ mongo localhost:27017 --username admin --password &quot;somepwd&quot;\
--authenticationDatabase admin
&gt; use reports
&gt; db.createUser({user: reports, pwd: &quot;12345&quot;,
     roles: [{role: &quot;readWrite&quot;, db: &quot;reports&quot;}]})
&gt; exit
</code></pre></li>

<li><p>Check that created user is able to login</p>

<pre><code>$ mongo localhost:27017/reports --username reports\
--password &quot;12345&quot; --authenticationDatabase reports
&gt; 
</code></pre></li>
</ol>

<p>That&rsquo;s it. <a href="http://docs.mongodb.org/v2.6/core/security-introduction/">Documentation</a>.</p>

</article>
<footer>
</footer>
</body>
</html>

