<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Oracle on Ora600 &amp;mdash; Some random thoughts</title>
    <link>http://blog.ora600.ru/tags/oracle/</link>
    <description>Recent content in Oracle on Ora600 &amp;mdash; Some random thoughts</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 31 May 2015 10:17:52 +0300</lastBuildDate>
    <atom:link href="http://blog.ora600.ru/tags/oracle/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Installing Oracle 12c on OpenVZ VPS</title>
      <link>http://blog.ora600.ru/post/installing-oracle-12-on-openvz-vps/</link>
      <pubDate>Sun, 31 May 2015 10:17:52 +0300</pubDate>
      
      <guid>http://blog.ora600.ru/post/installing-oracle-12-on-openvz-vps/</guid>
      <description>

&lt;p&gt;I have a relatively free server with enough memory and disk space for installing
oracle Database. One caveat here is that it&amp;rsquo;s running under OpenVZ. That means
that there is no swap file available.&lt;/p&gt;

&lt;p&gt;I tried to install Oracle XE on this host, cheating a little bit so it think
that there is enough swap file, but when starting oracle-xe configure it failed
with &amp;ldquo;Unable to attach to shared memory segment&amp;rdquo; error and Linux error &amp;ldquo;No space
left on device&amp;rdquo;. I didn&amp;rsquo;t resolve that problem, because &lt;code&gt;/dev/shm&lt;/code&gt; was present
of enough space and I was able to read/write data there.&lt;/p&gt;

&lt;p&gt;So I decided to try to install full-featured Oracle 12c on the server to play
around.&lt;/p&gt;

&lt;p&gt;I write this post during installation. Here I&amp;rsquo;ll write all steps and problems
I&amp;rsquo;ll face during installation.&lt;/p&gt;

&lt;p&gt;Here are some interesting tutorials I found on web:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.tecmint.com/oracle-12c-installation-in-centos-6/&#34;&gt;http://www.tecmint.com/oracle-12c-installation-in-centos-6/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dbaora.com/install-oracle-12c-release-1-12-1-on-centos-linux-7/&#34;&gt;http://dbaora.com/install-oracle-12c-release-1-12-1-on-centos-linux-7/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;0-initial-config-before-installation:2e0daa52bbc4f230cd1ccd7f02d6358f&#34;&gt;0. Initial config before installation&lt;/h1&gt;

&lt;p&gt;What we have:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;oracle user from Oracle XE installation&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cat /etc/passwd | grep oracle
oracle:x:502:502::/u01/app/oracle:/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;dba user group from Oracle XE installation&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cat /etc/group | grep 502
dba:x:502:
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;1-intall-prerequisites:2e0daa52bbc4f230cd1ccd7f02d6358f&#34;&gt;1. Intall prerequisites&lt;/h1&gt;

&lt;p&gt;It&amp;rsquo;s very convinient to install all prerequisites from single rpm package &lt;code&gt;oracle-rdbms-server-12cR1-preinstall&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# /etc/yum.repos.d/
# wget http://public-yum.oracle.com/public-yum-ol6.repo
# cd /etc/pki/rpm-gpg
# wget https://oss.oracle.com/el6/RPM-GPG-KEY-oracle
# yum install oracle-rdbms-server-12cR1-preinstall -y
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Additional information here - &lt;a href=&#34;http://www.oracle.com/technetwork/articles/servers-storage-admin/ginnydbinstallonlinux-488779.html&#34;&gt;How I Simplified Oracle Database 12c and 11g Installations on Oracle Linux 6&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Installing Oracle XE 11gR2 on CentOS 6</title>
      <link>http://blog.ora600.ru/post/installing-oracle-xe-11gr2-on-centos-6/</link>
      <pubDate>Sat, 06 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>http://blog.ora600.ru/post/installing-oracle-xe-11gr2-on-centos-6/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://www.davidghedini.com/pg/entry/install_oracle_11g_xe_on&#34;&gt;This&lt;/a&gt; great tutorial covers all aspects
of installation Oracle XE 11gR2 on CentOS 6. I even did &lt;a href=&#34;http://blog.ora600.ru/post/install-oracle-xe-on-centos-6&#34;&gt;backup post&lt;/a&gt; of it.&lt;/p&gt;

&lt;p&gt;Except some things.&lt;/p&gt;

&lt;h2 id=&#34;swap-file:77c954fc6993db658c5c4a709c7b2925&#34;&gt;Swap file&lt;/h2&gt;

&lt;p&gt;Oracle XE &lt;a href=&#34;http://docs.oracle.com/cd/E17781_01/install.112/e18802/toc.htm&#34;&gt;requires&lt;/a&gt; minimum 2 Gb of swap file. To verify your swap space use &lt;code&gt;# cat /proc/swaps&lt;/code&gt;. If there is no enough swap size – add it. Manual is &lt;a href=&#34;http://www.centos.org/docs/5/html/Deployment_Guide-en-US/s1-swap-adding.html&#34;&gt;here&lt;/a&gt;. I add it by using this:&lt;/p&gt;

&lt;blockquote&gt;
&lt;h4 id=&#34;5-2-3-creating-a-swap-file:77c954fc6993db658c5c4a709c7b2925&#34;&gt;5.2.3. Creating a Swap File&lt;/h4&gt;

&lt;p&gt;To add a swap file:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Determine the size of the new swap file in megabytes and multiply by 1024 to determine the number of blocks. For example, the block size of a 64 MB swap file is 65536.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;At a shell prompt as root, type the following command with count being equal to the desired block size:&lt;/p&gt;

&lt;p&gt;dd if=/dev/zero of=/swapfile bs=1024 count=65536&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Setup the swap file with the command:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mkswap /swapfile
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;3.1 Check file permissions, they should be 0600 and 0644 as they were in my case.
Change it to 0600 using&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    chmod 0600 /swapfile
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you use virtual machine with Open VZ supervisor you&amp;rsquo;ll get an error
&amp;ldquo;Operation not permitted&amp;rdquo;. Then you have to cheat and do the following trick
(found &lt;a href=&#34;http://linux-problem-solver.blogspot.ru/2013/08/create-fake-swap-in-openvz-vps-if-you-get-swapon-failed-operation-not-permitted-error.html&#34;&gt;here&lt;/a&gt;):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/bash
SWAP=&amp;quot;${1:-512}&amp;quot;
NEW=&amp;quot;$[SWAP*1024]&amp;quot;; TEMP=&amp;quot;${NEW//?/ }&amp;quot;; OLD=&amp;quot;${TEMP:1}0&amp;quot;
umount /proc/meminfo 2&amp;gt; /dev/null
sed &amp;quot;/^Swap\(Total\|Free\):/s,$OLD,$NEW,&amp;quot; /proc/meminfo &amp;gt; /etc/fake_meminfo
mount --bind /etc/fake_meminfo /proc/meminfo
free -m
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;To enable the swap file immediately but not automatically at boot time:&lt;/p&gt;

&lt;p&gt;swapon /swapfile&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;To enable it at boot time, edit /etc/fstab to include the following entry:&lt;/p&gt;

&lt;p&gt;/swapfile          swap            swap    defaults        0 0&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The next time the system boots, it enables the new swap file.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;After adding the new swap file and enabling it, verify it is enabled by viewing the output of the command cat &lt;code&gt;/proc/swaps&lt;/code&gt; or &lt;code&gt;free&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;hostname-resolving:77c954fc6993db658c5c4a709c7b2925&#34;&gt;Hostname resolving&lt;/h2&gt;

&lt;p&gt;There is an error during configuration of database&amp;rsquo;s setup (Step 2, running &lt;code&gt;oracle-xe configure&lt;/code&gt; command). It fails with the following statement:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Database Configuration failed. Look into /u01/app/oracle/product/11.2.0/xe/config/log for details&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I found a solution in &lt;a href=&#34;http://arnekroeger.blogspot.com/2011/09/oracle-11g-xe-installation-error.html&#34;&gt;Arne Kroger&amp;rsquo;s blog&lt;/a&gt; — if you&amp;rsquo;ll check errors in log files, mentioned inerror message, with &lt;code&gt;cat *.log | grep ORA-&lt;/code&gt; you&amp;rsquo;ll see that it can&amp;rsquo;t find a host with your system name. All you have to do is edit &lt;code&gt;/etc/hosts&lt;/code&gt; file adding the line&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;127.0.0.1   centos63
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After restarting of &lt;code&gt;oracle-xe configure&lt;/code&gt; everything should be fine.&lt;/p&gt;

&lt;h2 id=&#34;changing-http-port-of-apex:77c954fc6993db658c5c4a709c7b2925&#34;&gt;Changing HTTP port of APEX&lt;/h2&gt;

&lt;p&gt;During install I put APEX on port 80. It&amp;rsquo;s privileged port and can be runned only by root, not oracle. So, after setup APEX wasn&amp;rsquo;t working. I changed port to 8080 with this commands:&lt;/p&gt;

&lt;p&gt;Getting info about current port:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; select dbms_xdb.gethttpport as &amp;quot;HTTP-Port&amp;quot;
            , dbms_xdb.getftpport as &amp;quot;FTP-Port&amp;quot; from dual;

HTTP-Port   FTP-Port
---------- ----------
        80          0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Changing to desired value:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; begin
 2    dbms_xdb.sethttpport(&#39;8080&#39;);
 3    dbms_xdb.setftpport(&#39;2100&#39;);
 4  end;
 5  /
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;0 means that port is disabled.&lt;/p&gt;

&lt;p&gt;Additional info in &lt;a href=&#34;http://daust.blogspot.ru/2006/01/xe-changing-default-http-port.html&#34;&gt;this&lt;/a&gt; post by daust.&lt;/p&gt;

&lt;h2 id=&#34;upgrading-apex:77c954fc6993db658c5c4a709c7b2925&#34;&gt;Upgrading APEX&lt;/h2&gt;

&lt;p&gt;Default APEX in Oracle XE is outdated. Download new version and install. Upgrade process is &lt;a href=&#34;http://www.oracle.com/technetwork/developer-tools/apex/upgrade-apex-for-xe-154969.html&#34;&gt;covered here&lt;/a&gt;. Complete manual is &lt;a href=&#34;http://docs.oracle.com/cd/E37097_01/doc/install.42/e35123/toc.htm&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://docs.oracle.com/cd/E17781_01/index.htm&#34;&gt;Official documentation of Oracle XE.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tested on CentOS 6.3 and 6.4.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>